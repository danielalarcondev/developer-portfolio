---
import GmailIcon from './Icons/GmailIcon.astro';
import OutlookIcon from './Icons/OutlookIcon.astro';
import YahooIcon from './Icons/YahooIcon.astro';
import CopyIcon from './Icons/CopyIcon.astro';

import './EmailModal.css';

interface Props {
	email: string;
}

const { email } = Astro.props;
---

<script>
	import { configureCopyEmail } from './helpers';
	configureCopyEmail();
</script>

<div
	id='select-modal'
	tabindex='-1'
	aria-hidden='true'
	class:list={[
		'hidden',
		'w-full',
		'max-h-full',
		'h-[calc(100%-1rem)]',
		'justify-center',
		'items-center',
		'fixed',
		'top-0',
		'right-0',
		'left-0',
		'z-50',
		'overflow-y-auto',
		'overflow-x-hidden',
		'md:inset-0',
		'bg-black/60',
	]}
	data-modal-backdrop='static'>
	<div class:list={['w-full', 'max-w-md', 'max-h-full', 'relative', 'p-4']}>
		<!-- Modal content -->
		<div
			class:list={[
				'relative',
				'rounded-lg',
				'shadow-sm',
				['bg-slate-50', 'dark:bg-slate-200'],
			]}>
			<!-- Modal header -->
			<div
				class:list={[
					'flex',
					'items-center',
					'justify-between',
					'p-4',
					'md:p-5',
					'rounded-t',
					['border-b', 'dark:border-slate-600'],
				]}>
				<h3 class:list={['text-lg', 'font-semibold', 'text-slate-900']}>
					Email Me
				</h3>
				<button
					type='button'
					class:list={[
						'h-8',
						'w-8',
						'ms-auto',
						'inline-flex',
						'justify-center',
						'items-center',
						'text-sm',
						'rounded-lg',
						'cursor-pointer',
						[
							'bg-transparent hover:bg-slate-200',
							'dark:hover:bg-slate-600',
						],
						[
							'text-slate-400 hover:text-slate-900',
							'dark:hover:text-white',
						],
					]}
					data-modal-toggle='select-modal'>
					<svg
						class:list={['w-3', 'h-3']}
						aria-hidden='true'
						xmlns='http://www.w3.org/2000/svg'
						fill='none'
						viewBox='0 0 14 14'>
						<path
							stroke='currentColor'
							stroke-linecap='round'
							stroke-linejoin='round'
							stroke-width='2'
							d='m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6'></path>
					</svg>
					<span class:list={['sr-only']}>Close modal</span>
				</button>
			</div>
			<!-- Modal body -->
			<div class:list={['p-4 md:p-5']}>
				<p class:list={['text-slate-600', 'mb-4']}>
					Select your email provider:
				</p>
				<ul class:list={['space-y-4', 'mb-6']}>
					<li>
						<a
							target='_blank'
							href=`https://mail.google.com/mail/u/1/?view=cm&to=${email}`
							class:list={[
								'w-full',
								'p-5',
								'inline-flex',
								'items-center',
								'justify-between',
								'border',
								'rounded-lg',
								'cursor-pointer',
								[
									'bg-slate-50 hover:bg-indigo-100',
									'bg-slate-200',
								],
								[
									'text-slate-900 hover:text-slate-900',
									'dark:text-white dark:hover:text-slate-300',
								],
								[
									'border-slate-200 hover:border-indigo-800',
									'dark:border-slate-500',
								],
							]}>
							<div
								class:list={[
									'flex',
									'flex-wrap',
									'gap-6',
									'justify-center',
									'w-full',
								]}>
								<div
									class:list={[
										'flex',
										'flex-1',
										'justify-end',
									]}>
									<GmailIcon />
								</div>
								<div
									class:list={[
										'w-full',
										'align',
										'self-center',
										'flex-[4]',
										'text-3xl',
										'font-semibold',
										'text-slate-800',
										,
									]}>
									Gmail
								</div>
							</div>
							<svg
								class:list={[
									'w-auto',
									'h-6',
									'ms-3',
									'rtl:rotate-180',
									['text-slate-500', 'dark:text-slate-400'],
								]}
								aria-hidden='true'
								xmlns='http://www.w3.org/2000/svg'
								fill='none'
								viewBox='0 0 14 10'>
								<path
									stroke='currentColor'
									stroke-linecap='round'
									stroke-linejoin='round'
									stroke-width='2'
									d='M1 5h12m0 0L9 1m4 4L9 9'>
								</path>
							</svg>
						</a>
					</li>

					<li>
						<a
							target='_blank'
							href=`https://outlook.live.com/mail/0/deeplink/compose?popoutv2=1&to=${email}`
							class:list={[
								'w-full',
								'p-5',
								'inline-flex',
								'items-center',
								'justify-between',
								'border',
								'rounded-lg',
								'cursor-pointer',
								[
									'bg-slate-50 hover:bg-indigo-100',
									'bg-slate-200',
								],
								[
									'text-slate-900 hover:text-slate-900',
									'dark:text-white dark:hover:text-slate-300',
								],
								[
									'border-slate-200 hover:border-indigo-800',
									'dark:border-slate-500',
								],
							]}>
							<div
								class:list={[
									'w-full',
									'flex',
									'flex-wrap',
									'gap-6',
									'justify-center',
								]}>
								<div
									class:list={[
										'flex',
										'flex-1',
										'justify-end',
									]}>
									<OutlookIcon />
								</div>
								<div
									class:list={[
										'w-full',
										'flex-[4]',
										'align',
										'self-center',
										'text-3xl',
										'font-semibold',
										'text-slate-800',
									]}>
									Outlook
								</div>
							</div>
							<svg
								class:list={[
									'w-auto',
									'h-6',
									'ms-3',
									'rtl:rotate-180',
									['text-slate-500', 'dark:text-slate-400'],
								]}
								aria-hidden='true'
								xmlns='http://www.w3.org/2000/svg'
								fill='none'
								viewBox='0 0 14 10'>
								<path
									stroke='currentColor'
									stroke-linecap='round'
									stroke-linejoin='round'
									stroke-width='2'
									d='M1 5h12m0 0L9 1m4 4L9 9'>
								</path>
							</svg>
						</a>
					</li>

					<li>
						<a
							target='_blank'
							href=`https://compose.mail.yahoo.com/?to=${email}`
							class:list={[
								'w-full',
								'p-5',
								'inline-flex',
								'items-center',
								'justify-between',
								'border',
								'rounded-lg',
								'cursor-pointer',
								[
									'bg-slate-50 hover:bg-indigo-100',
									'bg-slate-200',
								],
								[
									'text-slate-900 hover:text-slate-900',
									'dark:text-white dark:hover:text-slate-300',
								],
								[
									'border-slate-200 hover:border-indigo-800',
									'dark:border-slate-500',
								],
							]}>
							<div
								class:list={[
									'flex',
									'flex-wrap',
									'gap-6',
									'justify-center',
									'w-full',
								]}>
								<div
									class:list={[
										'flex',
										'flex-1',
										'justify-end',
									]}>
									<YahooIcon />
								</div>
								<div
									class:list={[
										'w-full',
										'text-3xl',
										'font-semibold',
										'align',
										'self-center',
										'flex-[4]',
										'text-slate-800',
									]}>
									Yahoo
								</div>
							</div>
							<svg
								class:list={[
									'w-auto',
									'h-6',
									'ms-3',
									'rtl:rotate-180',
									['text-slate-500', 'dark:text-slate-400'],
								]}
								aria-hidden='true'
								xmlns='http://www.w3.org/2000/svg'
								fill='none'
								viewBox='0 0 14 10'>
								<path
									stroke='currentColor'
									stroke-linecap='round'
									stroke-linejoin='round'
									stroke-width='2'
									d='M1 5h12m0 0L9 1m4 4L9 9'>
								</path>
							</svg>
						</a>
					</li>
				</ul>

				<p>
					<span class:list={['text-slate-600']}>Email address:</span>
					<br />
					<button
						class:list={[
							'email-button-wrapper',
							'w-fit',
							'h-fit',
							'cursor-default',
							'text-slate-500',
						]}>
						<span
							class:list={[
								'email-address',
								'select-all',
								'cursor-text',
							]}>{email}</span
						>
						<CopyIcon />
					</button>
				</p>

				<button
					type='button'
					data-modal-toggle='select-modal'
					class:list={[
						[
							'inline-flex',
							'w-full',
							'justify-center',
							'text-white',
							'text-sm',
							'px-5',
							'py-2.5',
							'text-center',
							'dark:focus:ring-blue-800',
							'mt-8',
							['bg-rose-500 hover:bg-rose-600'],
							'cursor-pointer',
						],
					]}>
					Close
				</button>
			</div>
		</div>
	</div>
</div>
